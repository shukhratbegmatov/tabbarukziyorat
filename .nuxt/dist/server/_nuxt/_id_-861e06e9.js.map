{"version":3,"file":"_id_-861e06e9.js","sources":["../../../../pages/attractions/[id].vue"],"sourcesContent":["<template>\n  <div class=\"min-h-[calc(100vh-239px)]\">\n    <div class=\"pt-20 md:pt-[120px]\">\n      <Breadcrumb :menu=\"link\" class=\"container px-0\" />\n      <div class=\"container pt-5 md:pt-9 pb-5 md:pb-[74px]\">\n        <div\n          class=\"flex items-start md:items-center justify-between mb-7 md:flex-row flex-col md:space-y-0 space-y-3\"\n        >\n          <div class=\"space-y-2\">\n            <h1\n              class=\"font-bold leading-130 text-3xl md:text-40 text-white font-playfair\"\n            >\n              {{ $t('attractions') }}\n            </h1>\n            <p class=\"text-sm text-white/60 font-semibold leading-130\">\n              {{\n                countParser($t('all_attract', country?.title), country?.title)\n              }}\n            </p>\n          </div>\n          <CommonAttractionTab\n            v-if=\"religionData?.length\"\n            :list=\"religionList\"\n            :model-value=\"activeTab\"\n            @update:modelValue=\"handleUpdateTab\"\n            class=\"!w-auto\"\n          />\n        </div>\n        <div\n          class=\"grid sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6 sm:gap-6\"\n        >\n          <CardSingleAttractions\n            :data=\"item\"\n            :card-loading=\"loading\"\n            v-for=\"(item, i) of religionData\"\n            title-class=\"!text-base !font-semibold !leading-130\"\n            text-class=\"!text-sm !font-medium !leading-130\"\n            :key=\"i\"\n            card-class=\"w-full sm:!w-[178px] !h-[200px]\"\n          />\n        </div>\n        <Button\n          v-if=\"nextData\"\n          @click=\"loadMoreDestination\"\n          variant=\"secondary\"\n          :loading=\"loading\"\n          button-class=\"lg:!px-7 lg:!px-3\"\n          class=\"mx-auto mt-9\"\n        >\n          <template #default>\n            <div class=\"flex-center space-x-1\">\n              <span>{{ $t('load_more') }}</span>\n              <span class=\"icon-arrow-right text-2xl rotate-90\"></span>\n            </div>\n          </template>\n        </Button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, onMounted, ref, watch } from 'vue'\nimport { useRoute } from 'vue-router'\n\nimport Breadcrumb from '~/components/Common/Breadcrumb.vue'\nimport Button from '~/components/Common/Button.vue'\nimport { $api } from '~/composables/useFetcher'\nimport { attractions } from '~/data/attractions'\nimport { useDestinationStore } from '~/store/destination'\nimport { TCommonFetcher } from '~/types/common'\nimport { definePageMeta } from '#imports'\n\nconst destinationStore = useDestinationStore()\n\nconst link = computed(() => [\n  {\n    title: 'attractions',\n    link: `/`,\n  },\n  {\n    title: country?.value?.title,\n    link: `/country/${route.params.id}`,\n  },\n  {\n    title: religionActive?.value?.title,\n    link: `/`,\n  },\n])\ndefinePageMeta({\n  layout: 'default',\n})\n\nconst route = useRoute()\nconst religionData = ref([])\nconst nextData = ref(undefined)\n\nconst activeTab = ref(1)\nconst limit = ref(12)\n\nconst loading = ref(false)\n\nconst religionList = computed(() => destinationStore.religionList)\nconst religionActive = computed(() =>\n  destinationStore.religionList?.find((el) => el?.id === activeTab?.value)\n)\nconst country = computed(() =>\n  destinationStore?.countryList?.find((el) => el?.id === +route?.params?.id)\n)\nfunction fetchReligionSingle() {\n  loading.value = true\n  return new Promise((resolve, reject) => {\n    $api\n      .$get<TCommonFetcher>('/destination/CountryAttractionListByReligion', {\n        params: {\n          religion__id: activeTab.value,\n          destination_country__id: route.params.id,\n          limit: limit.value,\n        },\n      })\n      .then((response) => {\n        religionData.value = response.results\n        nextData.value = response?.next\n        resolve(response)\n      })\n      .catch((error) => {\n        reject(error)\n      })\n      .finally(() => {\n        setTimeout(() => {\n          loading.value = false\n        }, 300)\n      })\n  })\n}\nconst handleUpdateTab = (target: number | string) => {\n  activeTab.value = target\n}\n\nconst loadMoreDestination = () => {\n  limit.value += 12\n  fetchReligionSingle()\n}\n\nonMounted(() => {\n  fetchReligionSingle()\n})\n\nasync function fetchData() {\n  return await Promise.all([\n    destinationStore.fetchReligionList(route?.params?.id),\n  ])\n}\nfetchData()\n\nwatch(\n  () => activeTab.value,\n  () => {\n    fetchReligionSingle()\n  }\n)\n\nfunction countParser(key, count) {\n  if (count && key) {\n    if (count === 0) {\n      return key\n    } else if (count === 1) {\n      return key\n    } else {\n      return key?.replace('{ n }', count)\n    }\n  }\n}\n</script>\n\n<style scoped></style>\n"],"names":["_a"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA,UAAA,mBAAA;AAEA,UAAA,OAAA,SAAA,MAAA;;AAAA;AAAA,QAA4B;AAAA,UAC1B,OAAA;AAAA,UACS,MAAA;AAAA,QACD;AAAA,QACR;AAAA,UACA,QAAA,wCAAA,UAAA,mBAAA;AAAA,UACyB,MAAA,YAAA,MAAA,OAAA;AAAA,QACQ;AAAA,QACjC;AAAA,UACA,QAAA,sDAAA,UAAA,mBAAA;AAAA,UACgC,MAAA;AAAA,QACxB;AAAA,MACR;AAAA,KAAA;AAMF,UAAA,QAAA;AACA,UAAA,eAAA,IAAA,CAAA,CAAA;AACA,UAAA,WAAA,IAAA,MAAA;AAEA,UAAA,YAAA,IAAA,CAAA;AACA,UAAA,QAAA,IAAA,EAAA;AAEA,UAAA,UAAA,IAAA,KAAA;AAEA,UAAA,eAAA,SAAA,MAAA,iBAAA,YAAA;AACA,UAAA,iBAAA;AAAA,MAAuB;;AAAA,sCAAA,iBAAA,mBAAA,KAAA,CAAA,QAAA,yBAAA,SAAA,uCAAA;AAAA;AAAA,IACkD;AAEzE,UAAA,UAAA;AAAA,MAAgB,MAAA;;AAAA,0EAAA,gBAAA,mBAAA,KAAA,CAAA,OAAA;;AAAA,2CAAA,QAAA,GAAAA,MAAA,+BAAA,WAAA,gBAAAA,IAAA;AAAA;AAAA;AAAA,IAC2D;AAE3E,aAAA,sBAAA;AACE,cAAA,QAAA;AACA,aAAA,IAAA,QAAA,CAAA,SAAA,WAAA;AACE,aAAA,KAAA,gDAAA;AAAA,UACwE,QAAA;AAAA,YAC5D,cAAA,UAAA;AAAA,YACkB,yBAAA,MAAA,OAAA;AAAA,YACc,OAAA,MAAA;AAAA,UACzB;AAAA,QACf,CAAA,EAAA,KAAA,CAAA,aAAA;AAGA,uBAAA,QAAA,SAAA;AACA,mBAAA,QAAA,qCAAA;AACA,kBAAA,QAAA;AAAA,QAAgB,CAAA,EAAA,MAAA,CAAA,UAAA;AAGhB,iBAAA,KAAA;AAAA,QAAY,CAAA,EAAA,QAAA,MAAA;AAGZ,qBAAA,MAAA;AACE,oBAAA,QAAA;AAAA,UAAgB,GAAA,GAAA;AAAA,QACZ,CAAA;AAAA,MACP,CAAA;AAAA,IACJ;AAEH,UAAA,kBAAA,CAAA,WAAA;AACE,gBAAA,QAAA;AAAA,IAAkB;AAGpB,UAAA,sBAAA,MAAA;AACE,YAAA,SAAA;AACA;IAAoB;AAOtB,mBAAA,YAAA;;AACE,aAAA,MAAA,QAAA,IAAA;AAAA,QAAyB,iBAAA,mBAAA,oCAAA,WAAA,mBAAA,EAAA;AAAA,MAC6B,CAAA;AAAA,IACrD;AAEH;AAEA;AAAA,MAAA,MAAA,UAAA;AAAA,MACkB,MAAA;AAEd;MAAoB;AAAA,IACtB;AAGF,aAAA,YAAA,KAAA,OAAA;AACE,UAAA,SAAA,KAAA;AACE,YAAA,UAAA,GAAA;AACE,iBAAA;AAAA,QAAO,WAAA,UAAA,GAAA;AAEP,iBAAA;AAAA,QAAO,OAAA;AAEP,iBAAA,2BAAA,QAAA,SAAA;AAAA,QAAkC;AAAA,MACpC;AAAA,IACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}