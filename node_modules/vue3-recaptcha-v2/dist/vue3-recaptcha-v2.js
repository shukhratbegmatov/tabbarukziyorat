import{defineComponent as e,toRefs as t,ref as r,inject as a,computed as c,onMounted as i,onUnmounted as n,openBlock as u,createBlock as o}from"vue";const d=Symbol("recaptchaSiteKey");function l(e,t){if(!t.siteKey)throw new Error("options must be included siteKey");e.provide(d,t.siteKey),function(e){const t=e.alterDomain?"www.recaptcha.net":"www.google.com";if(document.getElementById("vue3-recaptcha-v2"))return;const r=document.createElement("script");r.setAttribute("id","vue3-recaptcha-v2"),r.setAttribute("src",`https://${t}/recaptcha/api.js?render=explicit`),r.setAttribute("async",""),r.setAttribute("defer",""),r.onerror=()=>{},document.head.appendChild(r)}(t)}var p=e({name:"VueRecaptcha",emits:["verify","expired","fail","widgetId"],props:{theme:{type:String,default:"light"},size:{type:String,default:"normal"},tabindex:{type:Number,default:0}},setup:(e,{emit:u})=>{const{theme:o,size:l,tabindex:p}=t(e),s=r(null),h=r(""),v=a(d),m=c((()=>o.value)),w=c((()=>l.value)),f=c((()=>p.value)),y=()=>{window.grecaptcha.ready((()=>{s.value=window.grecaptcha.render(h.value,{sitekey:v,theme:m.value,size:w.value,tabindex:f.value,callback:e=>u("verify",e),"expired-callback":()=>u("expired"),"error-callback":()=>u("fail")}),u("widgetId",s.value)}))};return i((()=>{window.grecaptcha?y():document.getElementById("vue3-recaptcha-v2").onload=()=>{y()}})),n((()=>h.value="")),{reCAPTCHA:h}}});const s={ref:"reCAPTCHA"};function h(){return{resetRecaptcha:e=>{if("number"!=typeof e)throw new Error("resetRecaptcha must have 'widgetId'");window.grecaptcha.reset(e)}}}p.render=function(e,t,r,a,c,i){return u(),o("div",s,null,512)},p.__file="src/components/vueRecaptcha.vue";export{p as VueRecaptcha,l as default,h as useRecaptcha};
